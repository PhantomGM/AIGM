<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Game Master</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/styles.css') }}">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar with game information -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Game Info</h2>
                <button id="toggle-sidebar"><i class="fas fa-bars"></i></button>
            </div>
            
            <!-- Game state information -->
            <div class="game-info-section">
                <h3>Current Location</h3>
                <p id="current-location">Loading...</p>
                
                <h3>Game Time</h3>
                <p id="game-time">Loading...</p>
                
                <h3>Environment</h3>
                <p id="environment-description">Loading...</p>
            </div>
            
            <!-- Characters section -->
            <div class="game-info-section">
                <h3>Characters</h3>
                <ul id="character-list" class="character-list">
                    <li>Loading characters...</li>
                </ul>
                <button id="add-character-btn" class="action-button">
                    <i class="fas fa-user-plus"></i> Add Character
                </button>
            </div>
            
            <!-- NPCs section -->
            <div class="game-info-section">
                <h3>Active NPCs</h3>
                <ul id="npc-list">
                    <li>Loading NPCs...</li>
                </ul>
            </div>
            
            <!-- Recent events section -->
            <div class="game-info-section">
                <h3>Recent Events</h3>
                <div id="event-log">
                    <p>Game session starting...</p>
                </div>
            </div>
            
            <!-- Game controls -->
            <div class="game-controls">
                <button id="save-game-btn" class="action-button">
                    <i class="fas fa-save"></i> Save Game
                </button>
                <button id="load-game-btn" class="action-button">
                    <i class="fas fa-folder-open"></i> Load Game
                </button>
            </div>
        </aside>
        
        <!-- Main content area with chat -->
        <main class="main-content">
            <header class="app-header">
                <h1>AI Game Master</h1>
                <div id="game-mode" class="game-mode">Exploration Mode</div>
                <div class="header-controls">
                    <button id="toggle-settings" class="icon-button">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </header>
            
            <section class="chat-container">
                <div id="chat-messages" class="chat-messages">
                    <div class="message system-message">
                        <div class="message-content">
                            <p>Welcome to your adventure! I am your AI Game Master. What would you like to do?</p>
                        </div>
                    </div>
                </div>
                
                <div class="input-container">
                    <select id="character-select">
                        <option value="">Speak as Player</option>
                    </select>
                    <input type="text" id="player-input" placeholder="Enter your message...">
                    <button id="send-input-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </section>
        </main>
        
        <!-- Right sidebar for in-game tools -->
        <aside class="tools-sidebar">
            <div class="sidebar-header">
                <h2>Game Tools</h2>
                <button id="toggle-tools"><i class="fas fa-wrench"></i></button>
            </div>
            
            <!-- Dice Roller -->
            <div class="game-tool-section">
                <h3>Dice Roller</h3>
                <div class="dice-buttons">
                    <button class="dice-button" data-dice="d4">D4</button>
                    <button class="dice-button" data-dice="d6">D6</button>
                    <button class="dice-button" data-dice="d8">D8</button>
                    <button class="dice-button" data-dice="d10">D10</button>
                    <button class="dice-button" data-dice="d12">D12</button>
                    <button class="dice-button" data-dice="d20">D20</button>
                    <button class="dice-button" data-dice="d100">D100</button>
                </div>
                <div class="custom-dice">
                    <input type="text" id="custom-dice-input" placeholder="e.g., 2d6+3">
                    <button id="roll-custom-dice">Roll</button>
                </div>
                <div id="dice-result"></div>
            </div>
            
            <!-- Notes -->
            <div class="game-tool-section">
                <h3>Notes</h3>
                <textarea id="game-notes" placeholder="Record important information here..."></textarea>
                <button id="save-notes-btn" class="action-button">
                    <i class="fas fa-save"></i> Save Notes
                </button>
            </div>
            
            <!-- Tabs for reference material -->
            <div class="game-tool-section">
                <h3>Reference</h3>
                <div class="tabs">
                    <button class="tab-button active" data-tab="rules">Rules</button>
                    <button class="tab-button" data-tab="items">Items</button>
                    <button class="tab-button" data-tab="spells">Spells</button>
                </div>
                <div id="rules-content" class="tab-content active">
                    <p>Quick reference for important rules will appear here.</p>
                </div>
                <div id="items-content" class="tab-content">
                    <p>Item reference will appear here.</p>
                </div>
                <div id="spells-content" class="tab-content">
                    <p>Spells reference will appear here.</p>
                </div>
            </div>
        </aside>
    </div>
    
    <!-- Modal for character creation -->
    <div id="character-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Create New Character</h2>
            <div class="modal-actions">
                <button type="button" id="random-character-btn" class="action-button">
                    <i class="fas fa-dice"></i> Random Character
                </button>
            </div>
            <form id="character-form">
                <div class="form-group">
                    <label for="char-name">Character Name:</label>
                    <input type="text" id="char-name" required>
                </div>
                <div class="form-group">
                    <label for="char-race">Race:</label>
                    <select id="char-race" required>
                        <option value="">Select Race</option>
                        <option value="human">Human</option>
                        <option value="elf">Elf</option>
                        <option value="dwarf">Dwarf</option>
                        <option value="halfling">Halfling</option>
                        <option value="dragonborn">Dragonborn</option>
                        <option value="gnome">Gnome</option>
                        <option value="half-elf">Half-Elf</option>
                        <option value="half-orc">Half-Orc</option>
                        <option value="tiefling">Tiefling</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="char-class">Class:</label>
                    <select id="char-class" required>
                        <option value="">Select Class</option>
                        <option value="barbarian">Barbarian</option>
                        <option value="bard">Bard</option>
                        <option value="cleric">Cleric</option>
                        <option value="druid">Druid</option>
                        <option value="fighter">Fighter</option>
                        <option value="monk">Monk</option>
                        <option value="paladin">Paladin</option>
                        <option value="ranger">Ranger</option>
                        <option value="rogue">Rogue</option>
                        <option value="sorcerer">Sorcerer</option>
                        <option value="warlock">Warlock</option>
                        <option value="wizard">Wizard</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="char-level">Level:</label>
                    <input type="number" id="char-level" min="1" max="20" value="1" required>
                </div>
                <h3>Attributes</h3>
                <div class="attributes-container">
                    <div class="attribute">
                        <label for="attr-str">Strength:</label>
                        <input type="number" id="attr-str" min="3" max="20" value="10" required>
                    </div>
                    <div class="attribute">
                        <label for="attr-dex">Dexterity:</label>
                        <input type="number" id="attr-dex" min="3" max="20" value="10" required>
                    </div>
                    <div class="attribute">
                        <label for="attr-con">Constitution:</label>
                        <input type="number" id="attr-con" min="3" max="20" value="10" required>
                    </div>
                    <div class="attribute">
                        <label for="attr-int">Intelligence:</label>
                        <input type="number" id="attr-int" min="3" max="20" value="10" required>
                    </div>
                    <div class="attribute">
                        <label for="attr-wis">Wisdom:</label>
                        <input type="number" id="attr-wis" min="3" max="20" value="10" required>
                    </div>
                    <div class="attribute">
                        <label for="attr-cha">Charisma:</label>
                        <input type="number" id="attr-cha" min="3" max="20" value="10" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="char-background">Background (optional):</label>
                    <textarea id="char-background"></textarea>
                </div>
                <button type="submit" class="action-button">Create Character</button>
            </form>
        </div>
    </div>
    
    <!-- Modal for character profile -->
    <div id="character-profile-modal" class="modal">
        <div class="modal-content character-profile-content">
            <span class="close-modal">&times;</span>
            <h2 id="profile-char-name">Character Profile</h2>
            <div class="character-profile-info">
                <div class="profile-section">
                    <h3>Character Details</h3>
                    <div class="profile-detail">
                        <span class="detail-label">Race:</span>
                        <span id="profile-char-race"></span>
                    </div>
                    <div class="profile-detail">
                        <span class="detail-label">Class:</span>
                        <span id="profile-char-class"></span>
                    </div>
                    <div class="profile-detail">
                        <span class="detail-label">Level:</span>
                        <span id="profile-char-level"></span>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3>Attributes</h3>
                    <div class="profile-attributes">
                        <div class="profile-attribute">
                            <span class="attribute-name">STR</span>
                            <span id="profile-attr-str" class="attribute-value">10</span>
                            <span id="profile-attr-str-mod" class="attribute-mod">+0</span>
                        </div>
                        <div class="profile-attribute">
                            <span class="attribute-name">DEX</span>
                            <span id="profile-attr-dex" class="attribute-value">10</span>
                            <span id="profile-attr-dex-mod" class="attribute-mod">+0</span>
                        </div>
                        <div class="profile-attribute">
                            <span class="attribute-name">CON</span>
                            <span id="profile-attr-con" class="attribute-value">10</span>
                            <span id="profile-attr-con-mod" class="attribute-mod">+0</span>
                        </div>
                        <div class="profile-attribute">
                            <span class="attribute-name">INT</span>
                            <span id="profile-attr-int" class="attribute-value">10</span>
                            <span id="profile-attr-int-mod" class="attribute-mod">+0</span>
                        </div>
                        <div class="profile-attribute">
                            <span class="attribute-name">WIS</span>
                            <span id="profile-attr-wis" class="attribute-value">10</span>
                            <span id="profile-attr-wis-mod" class="attribute-mod">+0</span>
                        </div>
                        <div class="profile-attribute">
                            <span class="attribute-name">CHA</span>
                            <span id="profile-attr-cha" class="attribute-value">10</span>
                            <span id="profile-attr-cha-mod" class="attribute-mod">+0</span>
                        </div>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3>Background</h3>
                    <div id="profile-char-background" class="profile-background">
                        No background information available.
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3>Actions</h3>
                    <div class="profile-actions">
                        <button id="speak-as-character-btn" class="action-button">
                            <i class="fas fa-comment"></i> Speak as Character
                        </button>
                        <button id="edit-character-btn" class="action-button">
                            <i class="fas fa-edit"></i> Edit Character
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>
    
    <script src="{{ url_for('static', path='/js/main.js') }}"></script>
</body>
</html>
